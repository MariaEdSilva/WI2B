<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <form action="salvar.html" method="post" onsubmit="return ValidarFormulario()">
        <label>Cep</label>
        <input type="text" name="cep" id="cep" class="campo" />
        <button onclick="consultaAPI()" type="button">
            Consultar CEP
        </button>
        <br><br>
        <label>Endereço</label>
        <input type="text" name="endereco" id="endereco" class="campo" /> <br><br>
        <label>Número</label>
        <input type="text" name="numero" id="numero" class="campo" /><br><br>
        <label>Bairro</label>
        <input type="text" name="bairro" id="bairro" class="campo" /><br><br>
        <label>Cidade</label>
        <input type="text" name="cidade" id="cidade" class="campo" /> <br><br>
        <label>Estado</label>
        <input type="text" name="estado" id="estado" class="campo" /> <br><br>
        <button id="botao" class="botao" type="submit">
            Enviar dados
        </button>
    </form>
    
    <script>
        function consultaAPI()
        {
            var cep = document.getElementById("cep")
            var url = "https://viacep.com.br/ws/"+cep.value+"/json/"
            fetch( url ).then((response) => response.json())
            .then((dados)=> {
                var endereco = document.getElementById("endereco")
                var bairro = document.getElementById("bairro")
                var estado = document.getElementById("estado")
                var cidade = document.getElementById("cidade")
                endereco.value = dados.logradouro
                bairro.value = dados.bairro
                estado.value = dados.estado
                cidade.value = dados.localidade
            })
        }

        function ValidarFormulario()
        {
            var cep = document.getElementById('cep')
            var endereco = document.getElementById('endereco')
            var numero = document.getElementById('numero')
            var bairro = document.getElementById('bairro')
            var cidade = document.getElementById('cidade')
            var estado = document.getElementById('estado')

            if (cep.value == "")
            {
                cep.style.border = '1px solid red' 
                
            }
            else 
            {
                cep.style.border = '1px solid black'
                
            }
            if (endereco.value == "")
            {
                endereco.style.border = '1px solid red' 
                
            }
            else 
            {
                endereco.style.border = '1px solid black'
                
            }
            if (numero.value == "")
            {
                numero.style.border = '1px solid red' 
                
            }
            else 
            {
                numero.style.border = '1px solid black'
                
            }
            if (bairro.value == "")
            {
                bairro.style.border = '1px solid red' 
                
            }
            else 
            {
                bairro.style.border = '1px solid black'
                
            }
            if (cidade.value == "")
            {
                cidade.style.border = '1px solid red' 
                
            }
            else 
            {
                cidade.style.border = '1px solid black'
                
            }
            if (estado.value == "")
            {
                estado.style.border = '1px solid red' 
                
            }
            else 
            {
                estado.style.border = '1px solid black'
                
            }
        }
    </script>

</body>
</html>